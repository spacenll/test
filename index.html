<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سلايدر فيديو بالسحب مع مشغل Plyr</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.6.2/dist/plyr.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <section class="home-slider">
        <div class="container-extra-wide">
            <h2 class="section-title">مشاهير وسائل التواصل</h2>
            <div class="video-slider" id="videoSlider">
                <!-- فيديو 1 -->
                <div class="video-slide">
                    <video class="video-thumb" id="video1" controls>
                        <source src="https://media.zid.store/974d543a-b286-4efa-9b0e-e09fcc6e8408/23de9568-c684-44e0-aa72-b09ca3946d79.mp4" type="video/mp4">
                    </video>
                    <p class="video-title">مشهور 2</p>
                </div>

                <!-- فيديو 2 -->
                <div class="video-slide">
                    <video class="video-thumb" id="video2" controls>
                        <source src="https://media.zid.store/974d543a-b286-4efa-9b0e-e09fcc6e8408/23de9568-c684-44e0-aa72-b09ca3946d79.mp4" type="video/mp4">
                    </video>
                    <p class="video-title">مشهور 3</p>
                </div>

                <!-- فيديو 3 -->
                <div class="video-slide">
                    <video class="video-thumb" id="video3" controls>
                        <source src="https://media.zid.store/974d543a-b286-4efa-9b0e-e09fcc6e8408/23de9568-c684-44e0-aa72-b09ca3946d79.mp4" type="video/mp4">
                    </video>
                    <p class="video-title">مشهور 4</p>
                </div>
            </div>
        </div>
    </section>

    <!-- إضافة مكتبة Plyr -->
    <script src="https://cdn.jsdelivr.net/npm/plyr@3.6.2/dist/plyr.js"></script>

    <script>
        // تهيئة مشغل Plyr لجميع الفيديوهات
        const players = new Plyr('.video-thumb', {
            captions: { active: true, language: 'ar' },
            fullscreen: { enabled: true },
        });
    </script>

    <script>
        const slider = document.getElementById("videoSlider");
        let isDown = false;
        let startX;
        let scrollLeft;
        let isDragging = false;

        // عند بدء السحب
        slider.addEventListener("mousedown", (e) => {
            isDown = true;
            isDragging = false;
            startX = e.pageX - slider.offsetLeft;
            scrollLeft = slider.scrollLeft;
        });

        // عند مغادرة الماوس
        slider.addEventListener("mouseleave", () => {
            isDown = false;
        });

        // عند رفع الماوس
        slider.addEventListener("mouseup", () => {
            isDown = false;
        });

        // عند تحريك الماوس
        slider.addEventListener("mousemove", (e) => {
            if (!isDown) return;
            e.preventDefault();
            isDragging = true;
            const x = e.pageX - slider.offsetLeft;
            const walk = (x - startX) * 2;
            slider.scrollLeft = scrollLeft - walk;
        });

        // عند بدء السحب باستخدام التاتش
        slider.addEventListener("touchstart", (e) => {
            isDown = true;
            isDragging = false;
            startX = e.touches[0].pageX - slider.offsetLeft;
            scrollLeft = slider.scrollLeft;
        });

        // عند تحريك التاتش
        slider.addEventListener("touchmove", (e) => {
            if (!isDown) return;
            isDragging = true;
            const x = e.touches[0].pageX - slider.offsetLeft;
            const walk = (x - startX) * 2;
            slider.scrollLeft = scrollLeft - walk;
        });

        // عند إنهاء السحب باستخدام التاتش
        slider.addEventListener("touchend", () => {
            isDown = false;
        });

        // منطق تشغيل وإيقاف الفيديو عند الضغط على الزر
        document.querySelectorAll(".video-thumb").forEach((video) => {
            video.addEventListener("click", () => {
                // إذا كان الفيديو موقوفًا أو يتم تشغيله
                if (!isDragging) {
                    if (video.paused) {
                        video.play();
                    } else {
                        video.pause();
                    }
                }
            });
        });
    </script>

</body>
</html>
